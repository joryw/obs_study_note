# 1. tanstack query是什么
TanStack Query（原名 React Query）是一个专门用来处理「服务器端异步数据」的状态管理库，用于在 Web 应用中**获取、缓存、同步和更新**后端数据。它不是替代 axios/fetch 的请求库，而是站在它们外层，帮你统一管理请求结果和各种 loading/error 状态。[4][7]

## 核心作用

- 帮你自动管理接口请求的生命周期：加载中、成功、失败等状态，不再需要自己写一堆 useState/useEffect 判断。[4][7]
- 内置智能缓存：同一 queryKey 只请求一次，后续复用缓存，并支持过期时间、后台刷新等策略。[4][5]
- 自动同步数据：窗口聚焦、网络恢复时自动重新请求，让数据尽量保持最新。[4][7]

## 可以解决的典型问题

- 列表分页、无限滚动、轮询等场景的请求与缓存管理，比如分页的 todos 列表缓存每一页数据。[2][4]
- 多个组件需要复用同一份后端数据时的共享与更新，而不用把数据硬塞进 Redux/MobX 之类的全局 store。[3][5]
- 乐观更新：更新数据时先更新 UI、再请求接口，如果失败再回滚，提升交互体验。[4][5]

## 适用场景

- 接口很多、请求频繁的数据密集型应用（电商后台、管理系统、社交应用等）。[4][7]
- 对实时性有要求的场景，如行情、实时协作，需要频繁刷新或轮询数据。[4]
- 需要在 React、Vue、Svelte 等不同框架中统一处理服务器状态的项目，因为 TanStack Query 本身是框架无关的核心，再配合各框架适配器使用。[4][8]

## 和传统状态管理的区别

- TanStack Query 专注于「服务器状态」（外部数据），强调同步和缓存。[4][5]
- Redux 等传统状态库更适合管理「本地 UI 状态」或业务状态（比如当前选中的 tab、是否显示弹窗等）。[4]

如果你已经在用 axios/fetch，只要再加上 TanStack Query 来托管请求结果和状态，通常就能大幅减少样板代码，并且提升数据一致性和用户体验。[4][7]

Sources
[1] 概览| TanStack Query 中文文档 https://cangsdarm.github.io/react-query-web-i18n/react/
[2] @tanstack/query简介与基础使用 https://juejin.cn/post/7443651502382546982
[3] 深入淺出TanStack Query（一）：在呼叫useQuery 後發生了 ... https://mini-ghost.dev/posts/tanstack-query-source-code-1/
[4] 深入理解TanStack Query：现代Web 应用的异步状态管理利器 https://blog.csdn.net/qq_21418361/article/details/149839856
[5] TanStack Query ：现代Web 应用的异步状态管理利器原创 https://blog.csdn.net/W11929311582/article/details/147161574
[6] TanStack Query - Jotai https://www.jotai.com.cn/docs/integrations/query
[7] 一文掌握TanStack Query：让React 数据管理变得简单高效 https://juejin.cn/post/7501829019407482920
[8] 异步数据的状态管理TanStack Query 使用总结 https://www.cnblogs.com/zimengxiyu/p/17153631.html
[9] Overview | TanStack Query React Docs https://tanstack.com/query/latest/docs/framework/react/overview
[10] 介紹TanStackQuery - iT 邦幫忙::一起幫忙解決難題，拯救IT 人的一天 https://ithelp.ithome.com.tw/articles/10321751
2.